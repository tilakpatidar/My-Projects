<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>App</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>
         <script src="jQuery/jQuery.js" type="text/javascript"></script>
        <script src="bootstrap/js/bootstrap.js" type="text/javascript"></script>
        <link href="bootstrap/css/bootstrap-theme.css" rel="stylesheet" type="text/css"/>
            <link href="bootstrap/css/index.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript">
               function like(){
                     
                     
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp1=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp1.onreadystatechange=function()
                            {
                            if (xmlhttp1.readyState===4 && xmlhttp1.status===200)
                              {
                              
                            		 alert("Liked");
                                         $(".say").attr("disabled","");
                             
                             
                              }
                             };
                           
                                  
                                 var pid=$("#ppcode").val().toString();
                                   
                          xmlhttp1.open("GET","/cgi-bin/like.py?pid="+pid,true);
                          xmlhttp1.send();
                    
                   
                }
                 function comment(){
                     
                     
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp1=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp1.onreadystatechange=function()
                            {
                            if (xmlhttp1.readyState===4 && xmlhttp1.status===200)
                              {
                              
                            		 alert("Commented");
                                         $(".say").attr("disabled","");
                             
                             
                              }
                             };
                           
                                  
                                 var pid=$("#ppcode").val().toString();
                                  var comment=$('#comment').html();
                          xmlhttp1.open("GET","/cgi-bin/comment.py?pid="+pid+"&comment="+comment,true);
                          xmlhttp1.send();
                    
                   
                }
                function dislike(){
                     var pid=$("#ppcode").val().toString();
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp1=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp1.onreadystatechange=function()
                            {
                            if (xmlhttp1.readyState===4 && xmlhttp1.status===200)
                              {
                              
                            		 alert("DisLiked");
                                         $(".say").attr("disabled","");
                             
                             
                              }
                             };
                           
                                  
                                 
                                   
                          xmlhttp1.open("GET","/cgi-bin/dislike.py?pid="+pid,true);
                          xmlhttp1.send();
                    
                   
                }
                function showTitle(){
                    if($("#pid").val()!==""){
                         var pid=$("#ppcode").val();
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp1=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp1.onreadystatechange=function()
                            {
                            if (xmlhttp1.readyState===4 && xmlhttp1.status===200)
                              {
                              
                            		  var img1=xmlhttp1.responseText.toString().split(";;");
                                           $("#ppid").html(img1[0]);
                                          $("#title").html(img1[1]);
					 $("#pdesc").html(img1[2]);
                                         
					$(".say").prop("disabled", false);
                             
                             
                              }
                             };
                           
                                  
                                 
                                   
                          xmlhttp1.open("GET","/cgi-bin/getTitleDesc.py?pid="+pid,true);
                          xmlhttp1.send();
                    }
                   
                }
             function refreshPolicyGov(){
                 
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp1=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp1.onreadystatechange=function()
                            {
                            if (xmlhttp1.readyState===4 && xmlhttp1.status===200)
                              {
                              
                            		  var img1=xmlhttp1.responseText.toString().split(";;");
					 var i1=0;
					$("#policy_grp_gov").html("");
					var code1="";
				          while (i1<(img1.length-1)){
						//alert(img);
                                                var details1=img1[i1].toString().split("||");
                                                details1.pop();
				             code1=code1+'<li class=\"list-group-item new\"><b>Policy Code: </b>'+details1[0]+'<blockquote>&nbsp;&nbsp;&nbsp;'+details1[1]+'&nbsp;&nbsp;&nbsp;<label class=\"label label-default\">New</label></blockquote></li>';
				            i1++;  
				          }
					$("#policy_grp_gov").html(code1);
                             
                             
                              }
                             };
                           
                                  
                                 
                                   
                          xmlhttp1.open("GET","/cgi-bin/getGovPolicy.py",true);
                          xmlhttp1.send();
                          
                        
               }
                function refreshPolicyUser(){
                   
                    /*function displayDetails(){
                                            alert("Hello");
                                        }*/
                     if (window.XMLHttpRequest)
                            {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp=new XMLHttpRequest();
                            
                            }
                        else
                          {// code for IE6, IE5
                          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                          }
                          
                          xmlhttp.onreadystatechange=function()
                            {
                            if (xmlhttp.readyState===4 && xmlhttp.status===200)
                              {
                              
                            		  var img=xmlhttp.responseText.toString().split(";;");
                                          
					 var i=0;
					$("#policy_grp_user").html("");
					var code="";
                                        
				          while (i<(img.length-1)){
                                              
						//alert(img[i]);
                                                var details=img[i].toString().split("||");
                                                details.pop();
                                                //alert(details);

                                                code=code+"<li class=\"list-group-item new\"><b>Policy Code: </b>"+details[0]+"<blockquote>&nbsp;&nbsp;&nbsp;"+details[1]+"&nbsp;&nbsp;&nbsp;<label class=\"label label-default\">New</label></blockquote></li>";
				            i++;  
                                           
				          }
					$("#policy_grp_user").html(code);
                             
                             
                              }
                             };
                           
                                  
                                 
                                   
                          xmlhttp.open("GET","/cgi-bin/getUserPolicy.py",true);
                          xmlhttp.send();
                          
                        
               }
               
                    $(document).ready(function(){
                    
                 var intervalId = setInterval(function(){refreshPolicyGov();}, 1000);
                 var intervalId1 = setInterval(function(){refreshPolicyUser();}, 1000);
                 $(".say").attr("disabled","");
              });
              
                </script>
    </head>

    
    <body>
        <div id="top" class="row">
        <nav id="navbar1"  class="navbar navbar-default navbar-inverse navbar-fixed-top  " role="navigation">
             
             <div id="navbar"  class="container-fluid">
                 <div class="input-group" style="width: 40%;float: left;">
                   <a class="navbar-brand " style="" href="#">Policy Arch</a>
                </div>
                     
                 <div style="float: right;">
                     <a id="help" class="navbar-brand" href="/help.html"><span class=" glyphicon glyphicon-user"></span>&nbsp;Help</a>
                  
                 </div>
                 <div style="float: right;">
                     
                     <a id="help" class="navbar-brand" data-toggle="modal"  data-target=".bs-example-modal-sm"><span class="glyphicon glyphicon-upload "></span>&nbsp;Submit Policy</a>
                   </div>
            
             </div>
                 
                </nav>
        
        
        </div>
        <div class="jumbotron" style=" width: 100%; height: 45%;">
           
            
                <h3 id="pcode">Policy Code</h3>
                <input type="text" id="ppcode">
                <button onclick="showTitle();">Submit</button></br>
            <br/>
            <label>Policy Code:</label><label id="ppid"></label><br/>
            <label>Policy Name:</label><label id="title"></label>
                <p>Vote now!</p>
                <button class="btn btn-success say" onclick="like();"><span class="glyphicon glyphicon-thumbs-up"></span></button>
                <button class="btn btn-danger say" onclick="dislike();"><span class="glyphicon glyphicon-thumbs-down"></span></button>
                <button class="btn btn-primary say" data-toggle="modal"  data-target=".comment"><span class="glyphicon glyphicon-comment" ></span></button>
            
                
              
                
       
                <p style="float:right;"><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" class="btn btn-primary btn-lg"  role="button">Learn more about the policy</a></p>
                
       </div>
        
    
        <div id="collapseOne" class="panel-collapse collapse" style="">
                        <div id="pdesc" class="panel-body">
                   
                  </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col col-lg-6">
                    <label class="label label-info" style=" font-size: large;width: 50%; height: 100%; ">Goverment Policies</label>
                        <ul class="list-group pre-scrollable" id="policy_grp_gov">
                           

                      </ul>
                </div>
                <div class="col col-lg-6">
                    <label class="label label-info" style="font-size: large;width: 50%; height: 100%;">Suggested Policies</label>
                    <ul class="list-group pre-scrollable" id="policy_grp_user">
                           

                      </ul>
                </div>
            </div>
        </div>
       
        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content" style="padding-top: 50px;padding-bottom: 50px;">
                        <label class="center-block" style="text-align:center;">Upload a excel spreadsheet(.xlsx)</label><br/>
                     
                        <div style="margin-left: auto;margin-right: auto;width: 240px;"><input type="file" name="file" form="xl"  /></div><br/>
                        <div  style="margin-left: auto;margin-right: auto;width: 240px;"><form id="xl" enctype="multipart/form-data" action="/cgi-bin/save.py" method="post"><input type="submit" class="btn btn-success" style="width: 100%;" value="Upload"  /></form></div>
                    </div>
                </div>
</div>
       <div class="modal fade comment" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content" style="padding-top: 50px;padding-bottom: 50px;padding-left: 50px;padding-right: 50px;">
                      <label class="center-block" style="text-align:center;">Post a comment</label><br/>
                     
                      <textarea id="comment" cols="32" rows="5"></textarea><br/>
                      <button class="btn btn-primary center-block" onclick='comment();' style="text-align: center;" ><span class="glyphicon glyphicon-comment"></span>&nbsp;Comment</button>
                          
                  </div>
                </div>
</div>      
            
            
        
    </body>
</html>
